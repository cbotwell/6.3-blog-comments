{"version":3,"sources":["js/setup.js","templates/app.js","templates/comment.js","js/comment.js","js/app.js","js/comment-mvc.js"],"sourcesContent":["var AppTemplates = {};\n","AppTemplates['app'] = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<section class=\\\"wrapper\\\">\\n    <header class=\\\"header\\\">\\n        <h3>Comments</h1>\\n        <button class=\\\"add-comment\\\">Add Comment</button>\\n        <div class=\\\"new-comment\\\">\\n            <p>name</p>\\n            <input type=\\\"text\\\" class=\\\"name\\\">\\n            <p>email</p>\\n            <input type=\\\"text\\\" class=\\\"email\\\">\\n            <p>comment</p>\\n            <textarea class=\\\"comment\\\"></textarea>\\n            <button class=\\\"submit-comment\\\">Submit</button>\\n        </div>\\n    </header>\\n    <section class=\\\"main\\\">\\n        <ul class=\\\"comments\\\"></ul>\\n    </section>\\n</section>\\n\";\n},\"useData\":true});","AppTemplates['comment'] = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var helper, alias1=helpers.helperMissing, alias2=\"function\", alias3=this.escapeExpression;\n\n  return \"<a href=\\\"mailto:\"\n    + alias3(((helper = (helper = helpers.email || (depth0 != null ? depth0.email : depth0)) != null ? helper : alias1),(typeof helper === alias2 ? helper.call(depth0,{\"name\":\"email\",\"hash\":{},\"data\":data}) : helper)))\n    + \"?subject=RE:%20Your%20Obnoxious%20Comment\\\" class=\\\"name\\\">\"\n    + alias3(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : alias1),(typeof helper === alias2 ? helper.call(depth0,{\"name\":\"name\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</a>\\n<p class=\\\"comment\\\">\"\n    + alias3(((helper = (helper = helpers.commentString || (depth0 != null ? depth0.commentString : depth0)) != null ? helper : alias1),(typeof helper === alias2 ? helper.call(depth0,{\"name\":\"commentString\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</p>\\n<div class=\\\"votes\\\">\\n    \"\n    + alias3(((helper = (helper = helpers.upvotes || (depth0 != null ? depth0.upvotes : depth0)) != null ? helper : alias1),(typeof helper === alias2 ? helper.call(depth0,{\"name\":\"upvotes\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\n    <i class=\\\"fa fa-caret-up upvote\\\"></i>\\n    |\\n    \"\n    + alias3(((helper = (helper = helpers.downvotes || (depth0 != null ? depth0.downvotes : depth0)) != null ? helper : alias1),(typeof helper === alias2 ? helper.call(depth0,{\"name\":\"downvotes\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\n    <i class=\\\"fa fa-caret-down downvote\\\"></i>\\n</div>\\n\";\n},\"useData\":true});","var Comment = Backbone.Model.extend({\n  idAttribute: '_id',\n  defaults: {\n    name: '',\n    email: '',\n    commentString: '',\n    createDate: null,\n    upvotes: 0,\n    downvotes: 0\n  }\n});\n\nvar AllComments = Backbone.Collection.extend({\n  model: Comment,\n  url: 'http://tiny-lr.herokuapp.com/collections/co-comments'\n});\n","var CommentView = Backbone.View.extend({\n  tagName: 'li',\n\n  template: AppTemplates.comment,\n\n  initialize: function() {\n    this.listenTo(this.model, 'change', this.render);\n  },\n\n  events: {\n    'click .upvote': 'upvote',\n    'click .downvote': 'downvote'\n  },\n\n  render: function() {\n    var html = this.template(this.model.toJSON());\n    this.$el.html(html);\n\n    return this;\n  },\n\n  upvote: function() {\n    var upvotes = this.model.get('upvotes');\n    this.model.save({upvotes: ++upvotes});\n  },\n\n  downvote: function() {\n    var downvotes = this.model.get('downvotes');\n    this.model.save({downvotes: ++downvotes});\n  }\n\n});\n\nvar AppView = Backbone.View.extend({\n  template: AppTemplates.app,\n\n  el: '#target',\n\n  initialize: function() {\n    this.listenTo(this.collection, 'add reset sync', this.render);\n\n    this.render();\n    this.collection.fetch();\n  },\n\n  events: {\n    'click .add-comment': 'addComment',\n    'click .submit-comment': 'submitComment'\n  },\n\n  render: function() {\n    var html = this.template(this.collection);\n    var _this = this;\n\n    this.$el.html(html);\n\n    this.collection.sortBy('createDate').forEach(function(comment) {\n      var childView = new CommentView({model: comment});\n      _this.$el.find('.comments').append(childView.render().$el);\n    });\n\n    console.info('render');\n\n    return this;\n  },\n\n  addComment: function() {\n    this.$el.find('.new-comment').slideDown();\n  },\n\n  submitComment: function() {\n    var name = this.$el.find('input.name').val();\n    var email = this.$el.find('input.email').val();\n    var commentString = this.$el.find('textarea.comment').val();\n    this.collection.create({name: name, email: email, commentString: commentString, createDate: new Date()});\n  }\n});\n","var comments = new AllComments();\nvar app = new AppView({collection: comments});\n"],"names":[],"mappings":"AAAA;;ACAA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5EA;AACA;","file":"app.js"}